<%- include('_head', { title }) %>

<main class="max-w-3xl mx-auto p-4">
  <h1 class="text-2xl font-semibold mb-6">Nueva orden — Institución</h1>

  <form action="/admin/ordenes/nueva-institucion" method="POST" class="space-y-4">

    <!-- Institución -->
    <div>
      <label class="block text-sm font-medium mb-1">Institución</label>
      <input
        type="text"
        name="institucion"
        class="w-full px-4 py-2 rounded border"
        placeholder="Nombre de la institución"
        required
      />
    </div>

    <!-- Nombre alumno / contacto -->
    <div>
      <label class="block text-sm font-medium mb-1">Nombre</label>
      <input
        type="text"
        name="nombre"
        class="w-full px-4 py-2 rounded border"
        placeholder="Nombre del alumno / contacto"
      />
    </div>

    <!-- Sección / Grupo + Paquete -->
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-medium mb-1">Sección / Grupo</label>
        <input
          type="text"
          name="seccion"
          class="w-full px-4 py-2 rounded border"
          placeholder="Ej.: 9° A, 3° Bachillerato…"
        />
      </div>

      <div>
        <label class="block text-sm font-medium mb-1">Paquete</label>
        <input
          type="text"
          name="paquete"
          class="w-full px-4 py-2 rounded border"
          placeholder="Paquete contratado (A, B, C…)"
        />
      </div>
    </div>

    <!-- Toma principal + Collages -->
    <div>
      <label class="block text-sm font-medium mb-1">Tomas y collages</label>
      <div class="grid md:grid-cols-4 gap-4">
        <div>
          <span class="block text-xs text-slate-600 mb-1">Toma principal</span>
          <input
            type="number"
            name="toma_principal"
            class="w-full px-4 py-2 rounded border"
            value="0"
          />
        </div>
        <div>
          <span class="block text-xs text-slate-600 mb-1">Collage 1</span>
          <input
            type="number"
            name="collage1"
            class="w-full px-4 py-2 rounded border"
            value="0"
          />
        </div>
        <div>
          <span class="block text-xs text-slate-600 mb-1">Collage 2</span>
          <input
            type="number"
            name="collage2"
            class="w-full px-4 py-2 rounded border"
            value="0"
          />
        </div>
        <div>
          <span class="block text-xs text-slate-600 mb-1">Collage 3</span>
          <input
            type="number"
            name="collage3"
            class="w-full px-4 py-2 rounded border"
            value="0"
          />
        </div>
      </div>
    </div>

    <!-- Fechas / teléfono -->
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-medium mb-1">Fecha de toma</label>
        <input
          type="date"
          name="fecha_toma"
          class="w-full px-4 py-2 rounded border"
        />
      </div>

      <div>
        <label class="block text-sm font-medium mb-1">Teléfono de contacto</label>
        <input
          type="text"
          name="telefono"
          class="w-full px-4 py-2 rounded border"
          placeholder="5037XXXXXX"
        />
      </div>
    </div>

    <!-- Urgencia -->
    <div>
      <label class="block text-sm font-medium mb-1">Urgencia</label>
      <select name="urgencia" class="w-full px-4 py-2 rounded border">
        <option value="Normal">Normal</option>
        <option value="Urgente">Urgente</option>
      </select>
    </div>

    <!-- Precio + Abono inicial -->
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-medium mb-1">Precio total ($)</label>
        <input
          type="number"
          step="0.01"
          name="precio"
          class="w-full px-4 py-2 rounded border"
          placeholder="Ej.: 150.00"
        />
      </div>

      <div>
        <label class="block text-sm font-medium mb-1">
          Abono inicial ($ opcional)
        </label>
        <input
          type="number"
          step="0.01"
          name="abono_inicial"
          class="w-full px-4 py-2 rounded border"
          placeholder="Ej.: 50.00 (dejar vacío si no ha abonado)"
        />
        <p class="text-xs text-slate-500 mt-1">
          Si dejas el abono vacío, se asumirá que todavía no ha abonado nada.
        </p>
      </div>
    </div>

    <!-- Estado de pago + entrega -->
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-medium mb-1">Estado de pago</label>
        <select name="pago_estado" class="w-full px-4 py-2 rounded border">
          <option value="Pendiente">Pendiente</option>
          <option value="Abono">Abono</option>
          <option value="Pagado">Pagado</option>
        </select>
        <p class="text-xs text-slate-500 mt-1">
          Si eliges <strong>Pagado</strong>, el sistema asumirá que se canceló
          el 100% del precio.
        </p>
      </div>

      <div>
        <label class="block text-sm font-medium mb-1">Estado de entrega</label>
        <select name="entrega" class="w-full px-4 py-2 rounded border">
          <option value="Pendiente">Pendiente</option>
          <option value="Entregado">Entregado</option>
        </select>
      </div>
    </div>

    <!-- Botones -->
    <div class="flex justify-end space-x-2 pt-2">
      <a href="/admin/ordenes?tab=instituciones"
         class="px-4 py-2 rounded-lg border text-slate-700 hover:bg-slate-50">
        Cancelar
      </a>

      <button type="submit"
        class="px-4 py-2 rounded-lg text-white bg-emerald-600 hover:bg-emerald-700">
        Guardar orden
      </button>
    </div>

  </form>
</main>

<%- include('_foot') %>
